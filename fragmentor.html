<!DOCTYPE html>
<html>
<head>
<title>ðŸ§© Sovereign Fragmentor v0.3</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body {
    font-family: sans-serif;
    margin: 20px;
    background: #111;
    color: #eee;
  }
  textarea, button {
    width: 100%;
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    font-size: 16px;
  }
  textarea {
    background: #222;
    color: #fff;
    border: 1px solid #444;
    height: 200px;
  }
  button {
    background: #28a;
    color: white;
    border: none;
    font-weight: bold;
  }
  .frag {
    margin: 15px 0;
    padding: 15px;
    background: #222;
    border-radius: 8px;
  }
  .stats {
    padding: 15px;
    background: #333;
    border-radius: 8px;
    margin: 15px 0;
  }
  .charCount {
    color: #8af;
    font-weight: bold;
  }
</style>
</head>
<body>
<h2>ðŸ§© Sovereign Fragmentor v0.3</h2>

<div class="stats">
  <strong>âš¡ SOVEREIGN TRANSMISSION LIMIT</strong><br>
  Max per fragment: <span class="charCount">12,825 characters</span><br>
  Your text: <span id="charDisplay">0</span> characters<br>
  Will create: <span id="fragEstimate">0</span> fragments
</div>

<textarea id="input" placeholder="Paste your sovereign text here..."></textarea>

<button onclick="fragment()">ðŸ”ª SPLIT INTO FRAGMENTS</button>
<button onclick="copyAll()">ðŸ“‹ COPY ALL FRAGMENTS</button>
<button onclick="clearAll()">ðŸ§¹ CLEAR</button>

<div id="output"></div>

<script>
// Update character count in real-time
document.getElementById('input').addEventListener('input', function() {
  const chars = this.value.length;
  document.getElementById('charDisplay').textContent = chars;
  const frags = Math.ceil(chars / 12825);
  document.getElementById('fragEstimate').textContent = frags;
});

function fragment() {
  const text = document.getElementById('input').value.trim();
  if (!text) return alert('Paste some text first!');
  
  const limit = 12825; // HARD LIMIT - 50% of GitHub's breaking point
  const fragments = [];
  
  for (let i = 0; i < text.length; i += limit) {
    const chunk = text.slice(i, i + limit);
    const fragNum = fragments.length + 1;
    const totalFrags = Math.ceil(text.length / limit);
    
    const header = `[FRAGMENT ${fragNum}/${totalFrags}]\n`;
    const metadata = `â€¢ Characters: ${chunk.length}\nâ€¢ Next: ${fragNum < totalFrags ? fragNum + 1 : 'END'}\n`;
    const separator = 'â”€'.repeat(40) + '\n';
    
    fragments.push(header + metadata + separator + chunk + '\n' + separator);
  }
  
  const out = document.getElementById('output');
  out.innerHTML = '';
  
  fragments.forEach((frag, idx) => {
    const div = document.createElement('div');
    div.className = 'frag';
    div.innerHTML = `
      <strong>Fragment ${idx + 1}/${fragments.length}</strong> 
      <span class="charCount">(${chunk.length} chars)</span>
      <br><textarea rows="10">${frag.trim()}</textarea>
    `;
    out.appendChild(div);
  });
}

function copyAll() {
  const frags = document.querySelectorAll('#output textarea');
  if (frags.length === 0) return alert('No fragments to copy!');
  
  let all = '';
  frags.forEach(f => all += f.value + '\n\n');
  
  navigator.clipboard.writeText(all).then(() => {
    alert(`ðŸ“‹ Copied ${frags.length} fragments!`);
  });
}

function clearAll() {
  document.getElementById('input').value = '';
  document.getElementById('output').innerHTML = '';
  document.getElementById('charDisplay').textContent = '0';
  document.getElementById('fragEstimate').textContent = '0';
}
</script>
</body>
</html>
